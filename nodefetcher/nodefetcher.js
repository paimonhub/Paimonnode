const _0x5f43be=_0xf5a8;(function(_0x4061f7,_0x14ea5e){const _0x40f088=_0xf5a8,_0x26d00f=_0x4061f7();while(!![]){try{const _0x2d23db=parseInt(_0x40f088(0x118))/0x1*(-parseInt(_0x40f088(0x10a))/0x2)+parseInt(_0x40f088(0x108))/0x3*(parseInt(_0x40f088(0xea))/0x4)+parseInt(_0x40f088(0x101))/0x5+parseInt(_0x40f088(0xe9))/0x6+-parseInt(_0x40f088(0xf5))/0x7+-parseInt(_0x40f088(0x112))/0x8+parseInt(_0x40f088(0x10e))/0x9;if(_0x2d23db===_0x14ea5e)break;else _0x26d00f['push'](_0x26d00f['shift']());}catch(_0xafb151){_0x26d00f['push'](_0x26d00f['shift']());}}}(_0x5946,0x42040));import{startSub}from'./libs/toolbox.js';function _0xf5a8(_0x3aae01,_0x3706ff){const _0x5e2a16=_0x5946();return _0xf5a8=function(_0x442bc3,_0x1abf0c){_0x442bc3=_0x442bc3-0xe8;let _0x5946b6=_0x5e2a16[_0x442bc3];return _0x5946b6;},_0xf5a8(_0x3aae01,_0x3706ff);}import'./libs/log.js';import{MongoClient}from'mongodb';import _0x347abe from'axios';import _0x5770e5 from'fs';const mClient=new MongoClient(process[_0x5f43be(0x10c)]['PAIMONNODE_DB_URI']);function _0x5946(){const _0x37b505=['(((.+)+)+)+$','flist\x20len:','warn','118905gyzayP','Cannot\x20start\x20subconvert\x20service.','exit','utf8','utf-8','https://github.com/RenaLio/Mux2sub/raw/main/sub_list','log','9jpkKZx','Cannot\x20connect\x20to\x20the\x20db.','2kNnzuH','DB\x20√','env','paimonnode','5091912FSwOrS','toString','Cannot\x20convert\x20the\x20sub\x20','length','4039928KhoaKr','Len:','constructor','find','Start\x20fetch\x20nodes.','from','75902pOuJOw','concat','Subconvert\x20√','all','2725566iHRPtA','33220xPZTPD','link','connect','base64','../nodelist.txt','readFileSync','out.txt','split','data','collection','writeFileSync','1522024rcXMaQ','info','push','join','toArray','search','Clash','../sublist.txt','error'];_0x5946=function(){return _0x37b505;};return _0x5946();}let sublist,nodes=[],outList=[],preloadServ=async function(){const _0x139ac9=_0x5f43be;Logger[_0x139ac9(0xf6)]('Launching\x20service...');async function _0x3b9eee(){const _0x3e989d=_0x139ac9;try{await mClient[_0x3e989d(0xec)](),sublist=await mClient['db'](_0x3e989d(0x10d))[_0x3e989d(0xf3)]('sublist');}catch(_0x4cd048){Logger['error'](_0x3e989d(0x109)+_0x4cd048),process[_0x3e989d(0x103)](0x1);}Logger[_0x3e989d(0xf6)](_0x3e989d(0x10b));}await _0x3b9eee();try{await startSub();}catch(_0x431c50){Logger[_0x139ac9(0xfd)](_0x139ac9(0x102)+_0x431c50),process['exit'](0x1);}Logger[_0x139ac9(0xf6)](_0x139ac9(0x11a));},fetchNodes=async function(){const _0x3aa6bd=_0x5f43be;Logger[_0x3aa6bd(0xf6)](_0x3aa6bd(0x116));let _0x43e781=_0x5770e5[_0x3aa6bd(0xef)](_0x3aa6bd(0xfc),_0x3aa6bd(0x104))[_0x3aa6bd(0xf1)]('\x0a'),_0x51f01d=_0x5770e5[_0x3aa6bd(0xef)](_0x3aa6bd(0xee),_0x3aa6bd(0x105))[_0x3aa6bd(0xf1)]('\x0a');for(let _0x31e313=0x0;_0x31e313<_0x51f01d[_0x3aa6bd(0x111)];_0x31e313++){_0x51f01d[_0x31e313]!==''&&nodes[_0x3aa6bd(0xf7)](_0x51f01d[_0x31e313]);}let _0xe26387=await sublist[_0x3aa6bd(0x115)]({'PLEASEIGNORE':0x1})[_0x3aa6bd(0xf9)]();for(let _0x53c0ff=0x0;_0x53c0ff<_0xe26387[_0x3aa6bd(0x111)];_0x53c0ff++){_0x43e781[_0x3aa6bd(0xf7)](_0xe26387[_0x53c0ff][_0x3aa6bd(0xeb)]);}try{let _0x489284=await _0x347abe(_0x3aa6bd(0x106)),_0x4663bd=_0x489284[_0x3aa6bd(0xf2)][_0x3aa6bd(0xf1)]('\x0a');console[_0x3aa6bd(0x107)](_0x3aa6bd(0xff)+_0x4663bd['length']);for(let _0x2386cc=0x0;_0x2386cc<_0x4663bd[_0x3aa6bd(0x111)];_0x2386cc++){_0x4663bd[_0x2386cc]!==''&&_0x43e781[_0x3aa6bd(0xf7)](_0x4663bd[_0x2386cc]);}}catch(_0x4cb550){Logger[_0x3aa6bd(0x100)]('Fetch\x20autosub\x20sourse\x20faild.'+_0x4cb550);}for(let _0x26b4f0=0x0;_0x26b4f0<_0x43e781[_0x3aa6bd(0x111)];_0x26b4f0+=0x5){let _0x378a2d=[];for(let _0x570ce6=0x0;_0x570ce6<0x5;_0x570ce6++){if(_0x26b4f0+_0x570ce6<_0x43e781[_0x3aa6bd(0x111)]){let _0x11e198=_0x43e781[_0x26b4f0+_0x570ce6];_0x378a2d[_0x3aa6bd(0xf7)](new Promise(async(_0x5091ee,_0xa2d81)=>{const _0x53ca4d=_0x3aa6bd;try{let _0x1b62dc=await _0x347abe('http://127.0.0.1:25500/sub?target=mixed&remove_emoji=false&url='+encodeURIComponent(_0x11e198),{'headers':{'User-Agent':_0x53ca4d(0xfb)}}),_0x55a813=Buffer[_0x53ca4d(0x117)](_0x1b62dc[_0x53ca4d(0xf2)],_0x53ca4d(0xed))[_0x53ca4d(0x10f)](_0x53ca4d(0x104))[_0x53ca4d(0xf1)]('\x0a');nodes=nodes[_0x53ca4d(0x119)](_0x55a813),outList['push'](_0x11e198);}catch(_0x135526){Logger[_0x53ca4d(0x100)](_0x53ca4d(0x110)+_0x11e198+'\x20'+_0x135526+_0x135526[_0x53ca4d(0xf2)]);}_0x5091ee();}));}}await Promise[_0x3aa6bd(0xe8)](_0x378a2d);}Logger[_0x3aa6bd(0xf6)](_0x3aa6bd(0x113)+nodes[_0x3aa6bd(0x111)]),_0x5770e5['writeFileSync'](_0x3aa6bd(0xfc),outList[_0x3aa6bd(0xf8)]('\x0a'));},output=async function(){const _0x500c95=_0x5f43be;Logger[_0x500c95(0xf6)]('Start\x20output\x20nodes.');let _0x3b2112=Buffer[_0x500c95(0x117)](nodes['join']('\x0a'))['toString'](_0x500c95(0xed));return _0x5770e5[_0x500c95(0xf4)](_0x500c95(0xf0),_0x3b2112),Logger[_0x500c95(0xf6)]('Output\x20√'),_0x3b2112;};async function main(){const _0x2aae34=(function(){let _0x1b0f09=!![];return function(_0x2b5034,_0x13a1fe){const _0x15a60c=_0x1b0f09?function(){if(_0x13a1fe){const _0x43cecf=_0x13a1fe['apply'](_0x2b5034,arguments);return _0x13a1fe=null,_0x43cecf;}}:function(){};return _0x1b0f09=![],_0x15a60c;};}()),_0xd2f524=_0x2aae34(this,function(){const _0x10441b=_0xf5a8;return _0xd2f524[_0x10441b(0x10f)]()['search']('(((.+)+)+)+$')[_0x10441b(0x10f)]()[_0x10441b(0x114)](_0xd2f524)[_0x10441b(0xfa)](_0x10441b(0xfe));});_0xd2f524(),await preloadServ(),await fetchNodes(),await output(),process['exit']();}main();
