const _0x2c781c=_0x3888;(function(_0x344da3,_0x2b1664){const _0x57b388=_0x3888,_0x5825ff=_0x344da3();while(!![]){try{const _0x8f1ef6=parseInt(_0x57b388(0xad))/0x1*(parseInt(_0x57b388(0xb4))/0x2)+-parseInt(_0x57b388(0x99))/0x3+parseInt(_0x57b388(0x90))/0x4+-parseInt(_0x57b388(0x96))/0x5*(parseInt(_0x57b388(0xa2))/0x6)+-parseInt(_0x57b388(0xab))/0x7+parseInt(_0x57b388(0xb5))/0x8+parseInt(_0x57b388(0xbd))/0x9*(parseInt(_0x57b388(0x9f))/0xa);if(_0x8f1ef6===_0x2b1664)break;else _0x5825ff['push'](_0x5825ff['shift']());}catch(_0x1143ff){_0x5825ff['push'](_0x5825ff['shift']());}}}(_0x2fa1,0x78319));import{startSub}from'./libs/toolbox.js';import'./libs/log.js';function _0x2fa1(){const _0x184910=['info','../nodelist.txt','1607430ItqSxa','concat','all','Start\x20output\x20nodes.','apply','push','4061870cFwwan','sublist','Subconvert\x20√','8040TouVRs','utf8','PAIMONNODE_DB_URI','search','Black\x20♂\x20Magic\x20faild.','http://127.0.0.1:25500/sub?target=mixed&remove_emoji=false&url=','connect','DB\x20√','from','920682dAunuN','collection','5UVJycu','utf-8','length','log','error','https://github.com/WilliamXor/Mux2sub/raw/main/urllist','readFileSync','22556wJwbgU','3956896dSmKKx','constructor','flist\x20len:','split','out.txt','base64','Start\x20fetch\x20nodes.','toString','27BCozwZ','Black\x20♂\x20Magic:Got\x20','paimonnode','link','../sublist.txt','(((.+)+)+)+$','Cannot\x20connect\x20to\x20the\x20db.','990744tQcBnt','data','Clash','exit','Success\x20fetch\x20','Cannot\x20start\x20subconvert\x20service.','3200KqJllh'];_0x2fa1=function(){return _0x184910;};return _0x2fa1();}import{MongoClient}from'mongodb';import _0x5f52f2 from'axios';import _0x38eebb from'fs';const mClient=new MongoClient(process['env'][_0x2c781c(0xa4)]);let sublist,nodes=[],outList=[],preloadServ=async function(){const _0x48fd26=_0x2c781c;Logger[_0x48fd26(0x97)]('Launching\x20service...');async function _0x405157(){const _0x1c6517=_0x48fd26;try{await mClient[_0x1c6517(0xa8)](),sublist=await mClient['db'](_0x1c6517(0xbf))[_0x1c6517(0xac)](_0x1c6517(0xa0));}catch(_0x4b9f44){Logger[_0x1c6517(0xb1)](_0x1c6517(0x8f)+_0x4b9f44),process[_0x1c6517(0x93)](0x1);}Logger['info'](_0x1c6517(0xa9));}await _0x405157();try{await startSub();}catch(_0x4080d9){Logger[_0x48fd26(0xb1)](_0x48fd26(0x95)+_0x4080d9),process['exit'](0x1);}Logger[_0x48fd26(0x97)](_0x48fd26(0xa1));},fetchNodes=async function(){const _0x31bdfa=_0x2c781c;Logger[_0x31bdfa(0x97)](_0x31bdfa(0xbb));let _0x33258d=_0x38eebb[_0x31bdfa(0xb3)](_0x31bdfa(0x8d),_0x31bdfa(0xa3))[_0x31bdfa(0xb8)]('\x0a'),_0x20fe81=_0x38eebb[_0x31bdfa(0xb3)](_0x31bdfa(0x98),_0x31bdfa(0xae))['split']('\x0a');for(let _0x22dae8=0x0;_0x22dae8<_0x20fe81[_0x31bdfa(0xaf)];_0x22dae8++){_0x20fe81[_0x22dae8]!==''&&nodes[_0x31bdfa(0x9e)](_0x20fe81[_0x22dae8]);}let _0x54f85d=await sublist['find']({'PLEASEIGNORE':0x1})['toArray']();for(let _0x1d638e=0x0;_0x1d638e<_0x54f85d['length'];_0x1d638e++){_0x33258d['push'](_0x54f85d[_0x1d638e][_0x31bdfa(0x8c)]);}try{let _0x55f9e4=await _0x5f52f2(_0x31bdfa(0xb2)),_0x2fb1ac=_0x55f9e4['data'][_0x31bdfa(0xb8)]('\x0a');console[_0x31bdfa(0xb0)](_0x31bdfa(0xb7)+_0x2fb1ac[_0x31bdfa(0xaf)]);for(let _0x2eb8c8=0x0;_0x2eb8c8<_0x2fb1ac['length'];_0x2eb8c8++){_0x2fb1ac[_0x2eb8c8]!==''&&_0x33258d[_0x31bdfa(0x9e)](_0x2fb1ac[_0x2eb8c8]);}Logger[_0x31bdfa(0x97)](_0x31bdfa(0xbe)+_0x33258d[_0x31bdfa(0xaf)]+'\x20');}catch(_0x10af43){Logger['warn'](_0x31bdfa(0xa6)+_0x10af43);}for(let _0x4d6e9e=0x0;_0x4d6e9e<_0x33258d[_0x31bdfa(0xaf)];_0x4d6e9e+=0x5){let _0x21ba0f=[];for(let _0x15b95e=0x0;_0x15b95e<0x5;_0x15b95e++){if(_0x4d6e9e+_0x15b95e<_0x33258d[_0x31bdfa(0xaf)]){let _0x167dac=_0x33258d[_0x4d6e9e+_0x15b95e];_0x21ba0f['push'](new Promise(async(_0x1eeaa1,_0x54e3e9)=>{const _0x50083a=_0x31bdfa;try{let _0x1ecb74=await _0x5f52f2(_0x50083a(0xa7)+encodeURIComponent(_0x167dac),{'headers':{'User-Agent':_0x50083a(0x92)}}),_0x2798ba=Buffer[_0x50083a(0xaa)](_0x1ecb74[_0x50083a(0x91)],_0x50083a(0xba))[_0x50083a(0xbc)](_0x50083a(0xa3))['split']('\x0a');Logger[_0x50083a(0x97)](_0x50083a(0x94)+_0x2798ba['length']+'\x20from\x20'+_0x167dac),nodes=nodes[_0x50083a(0x9a)](_0x2798ba);}catch(_0x3ae907){}_0x1eeaa1();}));}}await Promise[_0x31bdfa(0x9b)](_0x21ba0f);}},output=async function(){const _0x477e4a=_0x2c781c;Logger[_0x477e4a(0x97)](_0x477e4a(0x9c));let _0x889ee0=Buffer['from'](nodes['join']('\x0a'))[_0x477e4a(0xbc)](_0x477e4a(0xba));return _0x38eebb['writeFileSync'](_0x477e4a(0xb9),_0x889ee0),Logger['info']('Output\x20√'),_0x889ee0;};function _0x3888(_0x200e2e,_0x508b45){const _0x58b79b=_0x2fa1();return _0x3888=function(_0x3804ef,_0x39239b){_0x3804ef=_0x3804ef-0x8c;let _0x2fa111=_0x58b79b[_0x3804ef];return _0x2fa111;},_0x3888(_0x200e2e,_0x508b45);}async function main(){const _0x58a7e6=_0x2c781c,_0xd98b98=(function(){let _0x2df5a4=!![];return function(_0x24f5e,_0x292d05){const _0x1ad851=_0x2df5a4?function(){const _0x24c626=_0x3888;if(_0x292d05){const _0x3ba849=_0x292d05[_0x24c626(0x9d)](_0x24f5e,arguments);return _0x292d05=null,_0x3ba849;}}:function(){};return _0x2df5a4=![],_0x1ad851;};}()),_0x51717a=_0xd98b98(this,function(){const _0x5a2ae6=_0x3888;return _0x51717a[_0x5a2ae6(0xbc)]()[_0x5a2ae6(0xa5)](_0x5a2ae6(0x8e))[_0x5a2ae6(0xbc)]()[_0x5a2ae6(0xb6)](_0x51717a)[_0x5a2ae6(0xa5)]('(((.+)+)+)+$');});_0x51717a(),await preloadServ(),await fetchNodes(),await output(),process[_0x58a7e6(0x93)]();}main();
