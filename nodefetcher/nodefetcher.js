const _0x5a2e04=_0x1e24;(function(_0x3bae5e,_0x1bcd88){const _0x27541a=_0x1e24,_0x10d4e1=_0x3bae5e();while(!![]){try{const _0x259945=parseInt(_0x27541a(0xfe))/0x1*(parseInt(_0x27541a(0xf4))/0x2)+parseInt(_0x27541a(0x92))/0x3+-parseInt(_0x27541a(0xc8))/0x4+-parseInt(_0x27541a(0x100))/0x5*(parseInt(_0x27541a(0xeb))/0x6)+-parseInt(_0x27541a(0xcd))/0x7+parseInt(_0x27541a(0xd3))/0x8*(-parseInt(_0x27541a(0xe8))/0x9)+parseInt(_0x27541a(0xed))/0xa;if(_0x259945===_0x1bcd88)break;else _0x10d4e1['push'](_0x10d4e1['shift']());}catch(_0x2b8dff){_0x10d4e1['push'](_0x10d4e1['shift']());}}}(_0x4a34,0xd8b88));const _0x7a8b95=(function(){let _0x3c39d6=!![];return function(_0x20e7e7,_0x2299a5){const _0x358a68=_0x3c39d6?function(){const _0x2361d8=_0x1e24;if(_0x2299a5){const _0x3db946=_0x2299a5[_0x2361d8(0x9b)](_0x20e7e7,arguments);return _0x2299a5=null,_0x3db946;}}:function(){};return _0x3c39d6=![],_0x358a68;};}()),_0x2df3f0=_0x7a8b95(this,function(){const _0x2f569c=_0x1e24;return _0x2df3f0[_0x2f569c(0xc7)]()[_0x2f569c(0xcf)](_0x2f569c(0xbb))[_0x2f569c(0xc7)]()['constructor'](_0x2df3f0)[_0x2f569c(0xcf)](_0x2f569c(0xbb));});_0x2df3f0();function _0x1e24(_0x2a3d9a,_0x57191d){const _0x86de19=_0x4a34();return _0x1e24=function(_0x2df3f0,_0x7a8b95){_0x2df3f0=_0x2df3f0-0x92;let _0x4a34c2=_0x86de19[_0x2df3f0];return _0x4a34c2;},_0x1e24(_0x2a3d9a,_0x57191d);}import _0x13c62a from'child_process';import _0x3efbd9 from'path';import _0x58fca9 from'fs';import _0x4cc785 from'os';import _0x39384e from'axios';import _0x558d5d from'winston';import{MongoClient}from'mongodb';function _0x4a34(){const _0x37c1f3=['https://github.com/paimonhub/Paimonnode/raw/main/nodelist.txt','exit','error','Startup\x20completed.\x20Serving\x20HTTP\x20@\x20http://0.0.0.0:25500','format','message','cwd','length','has','level','\x20nodes','Config\x20Error:Could\x20not\x20find\x20the\x20key\x20\x22','info','find','stderr','out.txt','http://127.0.0.1:25500/sub?target=','split','&remove_emoji=false&url=','get','undefined','\x0a\x20\x20\x20\x20\x20\x20\x20\x20target=mixed\x0a\x20\x20\x20\x20\x20\x20\x20\x20url=','toArray','link','timestamp','Console','transports','Start\x20convert\x20sub\x20of\x20','close','DB\x20√','hash','(((.+)+)+)+$','combine','/libs/subconverter/','green','addColors','https://github.com/paimonhub/Paimonnode/raw/main/sublist.txt','red','Black\x20♂\x20Magic:Got\x20','base64','now','flist\x20len:','Subconvert\x20√','toString','560516PFwNPt','platform','paimonnode','logs/error-','yellow','4964274rpvHiI','unlinkSync','search','profile','concat','join','40ucALOM','File','update','includes','from','./libs/subconverter/generate.ini','random','push','utf8','set','connect','parse','env','./libs/subconverter/','Success\x20fetch\x20','Black\x20♂\x20Magic\x20faild.','url','arch','dateStr','spawn','development','55386agmwEU','warn','existsSync','6ItQbCN','debug','31392920zRspuD','.log','Error\x20in\x20convert\x20sub.Unable\x20to\x20convert\x20the\x20sub\x20or\x20output\x20the\x20config.','writeFileSync','floor','./libs/subconverter/cache/','NODE_ENV','115306eXIuMq','readdirSync','data','filter','0123456789abcdefghijklmnopqrstuvwxyz','getPath','printf','Launching\x20service...','Start\x20output\x20nodes.','./save','2XmXdcI','Logger','8193785UdvQCh','455784EodJnu','hex','collection','sublist','https://github.com/WilliamXor/Mux2sub/raw/main/urllist','convertList','PAIMONNODE_DB_URI','Platform\x20unsupported.','white','apply'];_0x4a34=function(){return _0x37c1f3;};return _0x4a34();}import _0x57f3a6 from'crypto';let pathFile=JSON[_0x5a2e04(0xde)](_0x58fca9['readFileSync']('./libs/path.json',_0x5a2e04(0xdb)));async function startSub(){async function _0x464459(){return new Promise((_0x2254a6,_0x22ff6b)=>{const _0x56f1e3=_0x1e24;let _0x2485d9=getPath('subconverter'),_0x1e2877=_0x13c62a['spawn'](_0x2485d9,[],{'cwd':_0x3efbd9[_0x56f1e3(0xd2)](process[_0x56f1e3(0xa2)](),_0x56f1e3(0xbd)),'shell':!![]});_0x1e2877['stderr']['on'](_0x56f1e3(0xf6),_0x532596=>{const _0x1ac5b4=_0x56f1e3;let _0x56cf91=Buffer[_0x1ac5b4(0xd7)](_0x532596)[_0x1ac5b4(0xc7)]('utf8');_0x56cf91[_0x1ac5b4(0xd6)](_0x1ac5b4(0x9f))&&_0x2254a6();});});}await _0x464459();}function getPath(_0x4ee818){const _0x33574c=_0x5a2e04;try{let _0x583bce=_0x3efbd9[_0x33574c(0xd2)](process[_0x33574c(0xa2)]()+'/libs/'+pathFile[_0x4ee818][_0x4cc785[_0x33574c(0xc9)]()][_0x4cc785[_0x33574c(0xe4)]()]);return _0x583bce;}catch(_0xc0fc3a){throw _0x33574c(0x99);}}function checkConfig(_0x2d19cc,_0xb734b0){const _0xd1d0d=_0x5a2e04;for(let _0x2c98aa=0x0;_0x2c98aa<_0xb734b0[_0xd1d0d(0xa3)];_0x2c98aa++){typeof _0x2d19cc[_0xb734b0[_0x2c98aa]]===_0xd1d0d(0xb0)&&(Logger['error'](_0xd1d0d(0xa7)+_0xb734b0[_0x2c98aa]+'\x22'),process[_0xd1d0d(0x9d)](0x1));}}function randomString(){const _0x10d87c=_0x5a2e04;let _0x2367b4='';for(let _0x5199c7=0xf;_0x5199c7>0x0;--_0x5199c7)_0x2367b4+=_0x10d87c(0xf8)[Math[_0x10d87c(0xf1)](Math[_0x10d87c(0xd9)]()*_0x10d87c(0xf8)['length'])];return _0x2367b4;}class Timer{constructor(){const _0x220808=_0x5a2e04;this[_0x220808(0xc4)]=Date[_0x220808(0xc4)]();}[_0x5a2e04(0xaf)](){const _0x5dc2a6=_0x5a2e04;return Date[_0x5dc2a6(0xc4)]()-this['now'];}}async function convertSub(_0x4a8933,_0x5a4041){const _0x33ddf4=_0x5a2e04;let _0x44ff59=[];for(let _0x524c8c=0x0;_0x524c8c<_0x4a8933[_0x33ddf4(0xa3)];_0x524c8c++){_0x44ff59[_0x33ddf4(0xda)](_0x4a8933[_0x524c8c][_0x33ddf4(0xe3)]);}Logger[_0x33ddf4(0xa8)](_0x33ddf4(0xb7)+_0x44ff59['length']+_0x33ddf4(0xa6)),Logger[_0x33ddf4(0xa8)]('Convert-sub:Start\x20convert\x20sub.');try{let _0x4b402e=await _0x39384e(_0x33ddf4(0xac)+_0x5a4041+_0x33ddf4(0xae)+encodeURIComponent(_0x44ff59[_0x33ddf4(0xd2)]('|')));return _0x4b402e['data'];}catch(_0x3e9046){Logger[_0x33ddf4(0x9e)](_0x33ddf4(0xef)+_0x3e9046),process[_0x33ddf4(0x9d)](0x1);}}async function clearSconvCache(){const _0xccebe3=_0x5a2e04;let _0x56a745=_0x58fca9[_0xccebe3(0xf5)]('./libs/subconverter/cache');for(let _0x2299c0=0x0;_0x2299c0<_0x56a745[_0xccebe3(0xa3)];_0x2299c0++){_0x58fca9[_0xccebe3(0xce)](_0xccebe3(0xf2)+_0x56a745[_0x2299c0]);}}var toolbox={'startSub':startSub,'checkConfig':checkConfig,'randomString':randomString,'getPath':getPath,'Timer':Timer,'convertSub':convertSub,'clearSconvCache':clearSconvCache};const levels={'error':0x0,'warn':0x1,'info':0x2,'debug':0x3},level=()=>{const _0x297bba=_0x5a2e04,_0x27122f=process[_0x297bba(0xdf)][_0x297bba(0xf3)]||'development',_0x14c6d8=_0x27122f===_0x297bba(0xe7);return _0x14c6d8?_0x297bba(0xec):_0x297bba(0xe9);},colors={'error':_0x5a2e04(0xc1),'warn':_0x5a2e04(0xcc),'info':_0x5a2e04(0xbe),'debug':_0x5a2e04(0x9a)};_0x558d5d[_0x5a2e04(0xbf)](colors);const format=_0x558d5d[_0x5a2e04(0xa0)][_0x5a2e04(0xbc)](_0x558d5d[_0x5a2e04(0xa0)][_0x5a2e04(0xb4)]({'format':'YYYY-MM-DD\x20HH:mm:ss:ms'}),_0x558d5d['format']['colorize']({'all':!![]}),_0x558d5d['format'][_0x5a2e04(0xfa)](_0xec89de=>'['+_0xec89de[_0x5a2e04(0xb4)]+']['+_0xec89de[_0x5a2e04(0xa5)]+']'+_0xec89de[_0x5a2e04(0xa1)])),transports=[new _0x558d5d[(_0x5a2e04(0xb6))][(_0x5a2e04(0xb5))](),new _0x558d5d[(_0x5a2e04(0xb6))][(_0x5a2e04(0xd4))]({'filename':_0x5a2e04(0xcb)+global[_0x5a2e04(0xe5)]+_0x5a2e04(0xee),'level':_0x5a2e04(0x9e)}),new _0x558d5d['transports'][(_0x5a2e04(0xd4))]({'filename':'logs/all-'+global[_0x5a2e04(0xe5)]+_0x5a2e04(0xee)})],Logger$1=_0x558d5d['createLogger']({'level':level(),'levels':levels,'format':format,'transports':transports});global[_0x5a2e04(0xff)]=Logger$1;function unique(_0x5c9781,_0x53cf76){const _0xd744f7=_0x5a2e04,_0x30ef2d=new Map();return _0x5c9781[_0xd744f7(0xf7)](_0x231ca3=>!_0x30ef2d[_0xd744f7(0xa4)](_0x231ca3[_0x53cf76])&&_0x30ef2d[_0xd744f7(0xdc)](_0x231ca3[_0x53cf76],0x1));}class testTask{constructor(_0x18c843){const _0x1b5a2a=_0x5a2e04;this[_0x1b5a2a(0xb3)]=_0x18c843,this[_0x1b5a2a(0xba)]=md5(_0x18c843),this[_0x1b5a2a(0xd0)]='['+this[_0x1b5a2a(0xba)]+']\x0a\x20\x20\x20\x20\x20\x20\x20\x20path='+this[_0x1b5a2a(0xba)]+_0x1b5a2a(0xb1)+this[_0x1b5a2a(0xb3)];}}function md5(_0x4f616a){const _0x16c0e5=_0x5a2e04;let _0x3a0f8a=_0x57f3a6['createHash']('md5');return _0x3a0f8a[_0x16c0e5(0xd5)](_0x4f616a)['digest'](_0x16c0e5(0x93));}async function convertList(_0x42dfd7){const _0x4aad6c=_0x5a2e04;let _0x16dd29=[];for(let _0x5ac99b=0x0;_0x5ac99b<_0x42dfd7['length'];_0x5ac99b++){_0x42dfd7[_0x5ac99b]!==''&&_0x16dd29[_0x4aad6c(0xda)](new testTask(_0x42dfd7[_0x5ac99b]));}_0x16dd29=unique(_0x16dd29,'hash');let _0x450220='';for(let _0x2d22f9 in _0x16dd29){_0x450220+=_0x16dd29[_0x2d22f9][_0x4aad6c(0xd0)],_0x450220+='\x0a';}_0x58fca9['writeFileSync'](_0x4aad6c(0xd8),_0x450220),await genConf();let _0x391a8c=[],_0x3b30ec=[];for(let _0x5675d9 in _0x16dd29){let _0x5c4041=_0x4aad6c(0xe0)+_0x16dd29[_0x5675d9][_0x4aad6c(0xba)];if(_0x58fca9[_0x4aad6c(0xea)](_0x5c4041)){_0x3b30ec[_0x4aad6c(0xda)](_0x16dd29[_0x5675d9][_0x4aad6c(0xb3)]);let _0x359bc2=_0x58fca9['readFileSync'](_0x5c4041,_0x4aad6c(0xdb));_0x58fca9[_0x4aad6c(0xce)](_0x5c4041);let _0x416ed9=Buffer[_0x4aad6c(0xd7)](_0x359bc2,_0x4aad6c(0xc3))['toString'](_0x4aad6c(0xdb))['split']('\x0a');Logger[_0x4aad6c(0xa8)](_0x4aad6c(0xe1)+_0x416ed9['length']+'\x20from\x20'+_0x16dd29[_0x5675d9][_0x4aad6c(0xb3)]);for(let _0x441d37 in _0x416ed9){_0x416ed9[_0x441d37]!==''&&_0x391a8c[_0x4aad6c(0xda)](_0x416ed9[_0x441d37]);}}}return _0x58fca9[_0x4aad6c(0xf0)](_0x4aad6c(0xfd),_0x3b30ec[_0x4aad6c(0xd2)]('\x0a')),_0x391a8c;}function genConf(){return new Promise(async(_0x4f16e0,_0x1516f0)=>{const _0x138ecb=_0x1e24;let _0x1406e6=toolbox[_0x138ecb(0xf9)]('subconverter'),_0x5be0ac=_0x13c62a[_0x138ecb(0xe6)](_0x1406e6,['-g'],{'cwd':_0x3efbd9[_0x138ecb(0xd2)](process[_0x138ecb(0xa2)](),_0x138ecb(0xbd))});_0x5be0ac['on'](_0x138ecb(0x9d),_0x4d00ba=>{_0x4f16e0();}),_0x5be0ac['on'](_0x138ecb(0xb8),_0x44cd72=>{_0x4f16e0();}),_0x5be0ac[_0x138ecb(0xaa)]['on']('data',async _0x23e048=>{const _0x5c5286=_0x138ecb;Buffer[_0x5c5286(0xd7)](_0x23e048)[_0x5c5286(0xc7)](_0x5c5286(0xdb));});});}var scov={'convertList':convertList};const mClient=new MongoClient(process['env'][_0x5a2e04(0x98)]);let sublist,nodes=[],preloadServ=async function(){const _0x1988a9=_0x5a2e04;Logger[_0x1988a9(0xa8)](_0x1988a9(0xfb));async function _0x5d9ad5(){const _0x19aa73=_0x1988a9;try{await mClient[_0x19aa73(0xdd)](),sublist=await mClient['db'](_0x19aa73(0xca))[_0x19aa73(0x94)](_0x19aa73(0x95));}catch(_0x334ff4){Logger['error']('Cannot\x20connect\x20to\x20the\x20db.'+_0x334ff4),process['exit'](0x1);}Logger[_0x19aa73(0xa8)](_0x19aa73(0xb9));}await _0x5d9ad5(),Logger['info'](_0x1988a9(0xc6));},fetchNodes=async function(){const _0x50ea36=_0x5a2e04;Logger[_0x50ea36(0xa8)]('Start\x20fetch\x20nodes.');let _0x2246ba=await _0x39384e(_0x50ea36(0xc0)),_0x425091=[];_0x425091=_0x425091[_0x50ea36(0xd1)](_0x2246ba[_0x50ea36(0xf6)]['split']('\x0a'));let _0x4a499c=await _0x39384e(_0x50ea36(0x9c)),_0x4a8f2b=_0x4a499c[_0x50ea36(0xf6)][_0x50ea36(0xad)]('\x0a');for(let _0x1fff9f=0x0;_0x1fff9f<_0x4a8f2b['length'];_0x1fff9f++){_0x4a8f2b[_0x1fff9f]!==''&&nodes[_0x50ea36(0xda)](_0x4a8f2b[_0x1fff9f]);}let _0x73ac01=await sublist[_0x50ea36(0xa9)]({'PLEASEIGNORE':0x1})[_0x50ea36(0xb2)]();for(let _0x380be4=0x0;_0x380be4<_0x73ac01[_0x50ea36(0xa3)];_0x380be4++){_0x425091[_0x50ea36(0xda)](_0x73ac01[_0x380be4][_0x50ea36(0xb3)]);}try{let _0x3e6c8d=await _0x39384e(_0x50ea36(0x96)),_0x18fa0d=_0x3e6c8d[_0x50ea36(0xf6)][_0x50ea36(0xad)]('\x0a');console['log'](_0x50ea36(0xc5)+_0x18fa0d[_0x50ea36(0xa3)]);for(let _0x54b118=0x0;_0x54b118<_0x18fa0d[_0x50ea36(0xa3)];_0x54b118++){_0x18fa0d[_0x54b118]!==''&&_0x425091['push'](_0x18fa0d[_0x54b118]);}Logger[_0x50ea36(0xa8)](_0x50ea36(0xc2)+_0x425091[_0x50ea36(0xa3)]+'\x20');}catch(_0x17aeb6){Logger[_0x50ea36(0xe9)](_0x50ea36(0xe2)+_0x17aeb6);}nodes=nodes[_0x50ea36(0xd1)](await scov[_0x50ea36(0x97)](_0x425091));},output=async function(){const _0x48447b=_0x5a2e04;Logger[_0x48447b(0xa8)](_0x48447b(0xfc));let _0x1c9224=Buffer[_0x48447b(0xd7)](nodes[_0x48447b(0xd2)]('\x0a'))[_0x48447b(0xc7)](_0x48447b(0xc3));return _0x58fca9[_0x48447b(0xf0)](_0x48447b(0xab),_0x1c9224),Logger[_0x48447b(0xa8)]('Output\x20√'),_0x1c9224;};async function main(){await preloadServ(),await fetchNodes(),await output(),process['exit']();}main();
