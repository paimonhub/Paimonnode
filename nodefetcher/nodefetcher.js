const _0x4f1a29=_0x153f;function _0x1176(){const _0xa91f2d=['Cannot\x20connect\x20to\x20the\x20db.','utf8','paimonnode','../nodelist.txt','find','env','21wZVWSe','exit','Launching\x20service...','toString','31128TDAoZt','(((.+)+)+)+$','9985030equNgg','599925LOQnxC','from','sublist','483ddknRA','Start\x20fetch\x20nodes.','flist\x20len:','\x20from\x20','log','writeFileSync','5761692UsxIfO','../sublist.txt','2881832yYBipM','Black\x20♂\x20Magic\x20faild.','out.txt','Subconvert\x20√','toArray','warn','PAIMONNODE_DB_URI','1943758gCmVsf','split','http://127.0.0.1:25500/sub?target=mixed&remove_emoji=false&url=','length','concat','Output\x20√','push','Clash','1vzLoZT','Cannot\x20start\x20subconvert\x20service.','357732sKYvus','info','base64','data','Start\x20output\x20nodes.','apply'];_0x1176=function(){return _0xa91f2d;};return _0x1176();}(function(_0x27c164,_0x4d1cca){const _0x36bbb9=_0x153f,_0x18edbf=_0x27c164();while(!![]){try{const _0x439bc1=parseInt(_0x36bbb9(0x105))/0x1*(parseInt(_0x36bbb9(0xfd))/0x2)+parseInt(_0x36bbb9(0x113))/0x3*(-parseInt(_0x36bbb9(0x107))/0x4)+-parseInt(_0x36bbb9(0x11a))/0x5+-parseInt(_0x36bbb9(0x117))/0x6*(-parseInt(_0x36bbb9(0x11d))/0x7)+parseInt(_0x36bbb9(0xf6))/0x8+parseInt(_0x36bbb9(0xf4))/0x9+-parseInt(_0x36bbb9(0x119))/0xa;if(_0x439bc1===_0x4d1cca)break;else _0x18edbf['push'](_0x18edbf['shift']());}catch(_0x52c0ad){_0x18edbf['push'](_0x18edbf['shift']());}}}(_0x1176,0x8f015));import{startSub}from'./libs/toolbox.js';import'./libs/log.js';import{MongoClient}from'mongodb';function _0x153f(_0x2016ba,_0xfb821e){const _0x128265=_0x1176();return _0x153f=function(_0x3757bf,_0x29240c){_0x3757bf=_0x3757bf-0xf1;let _0x117669=_0x128265[_0x3757bf];return _0x117669;},_0x153f(_0x2016ba,_0xfb821e);}import _0x544708 from'axios';import _0x34e597 from'fs';const mClient=new MongoClient(process[_0x4f1a29(0x112)][_0x4f1a29(0xfc)]);let sublist,nodes=[],outList=[],preloadServ=async function(){const _0x5e22b7=_0x4f1a29;Logger[_0x5e22b7(0x108)](_0x5e22b7(0x115));async function _0x2a6fb5(){const _0x90ac9e=_0x5e22b7;try{await mClient['connect'](),sublist=await mClient['db'](_0x90ac9e(0x10f))['collection'](_0x90ac9e(0x11c));}catch(_0x2adab7){Logger['error'](_0x90ac9e(0x10d)+_0x2adab7),process[_0x90ac9e(0x114)](0x1);}Logger[_0x90ac9e(0x108)]('DB\x20√');}await _0x2a6fb5();try{await startSub();}catch(_0x3c32bb){Logger['error'](_0x5e22b7(0x106)+_0x3c32bb),process[_0x5e22b7(0x114)](0x1);}Logger[_0x5e22b7(0x108)](_0x5e22b7(0xf9));},fetchNodes=async function(){const _0x2f3d48=_0x4f1a29;Logger[_0x2f3d48(0x108)](_0x2f3d48(0x11e));let _0x283a11=_0x34e597['readFileSync'](_0x2f3d48(0xf5),'utf8')['split']('\x0a'),_0x4abc65=_0x34e597['readFileSync'](_0x2f3d48(0x110),'utf-8')[_0x2f3d48(0xfe)]('\x0a');for(let _0x4e73d0=0x0;_0x4e73d0<_0x4abc65[_0x2f3d48(0x100)];_0x4e73d0++){_0x4abc65[_0x4e73d0]!==''&&nodes[_0x2f3d48(0x103)](_0x4abc65[_0x4e73d0]);}let _0x1490a2=await sublist[_0x2f3d48(0x111)]({'PLEASEIGNORE':0x1})[_0x2f3d48(0xfa)]();for(let _0x336dd0=0x0;_0x336dd0<_0x1490a2['length'];_0x336dd0++){_0x283a11[_0x2f3d48(0x103)](_0x1490a2[_0x336dd0]['link']);}try{let _0x3fe60a=await _0x544708('https://github.com/WilliamXor/Mux2sub/raw/main/urllist'),_0x315c1f=_0x3fe60a[_0x2f3d48(0x10a)]['split']('\x0a');console[_0x2f3d48(0xf2)](_0x2f3d48(0x11f)+_0x315c1f[_0x2f3d48(0x100)]);for(let _0x13429c=0x0;_0x13429c<_0x315c1f[_0x2f3d48(0x100)];_0x13429c++){_0x315c1f[_0x13429c]!==''&&_0x283a11[_0x2f3d48(0x103)](_0x315c1f[_0x13429c]);}Logger[_0x2f3d48(0x108)]('Black\x20♂\x20Magic:Got\x20'+_0x283a11[_0x2f3d48(0x100)]+'\x20');}catch(_0x325f86){Logger[_0x2f3d48(0xfb)](_0x2f3d48(0xf7)+_0x325f86);}for(let _0x1e485b=0x0;_0x1e485b<_0x283a11['length'];_0x1e485b+=0x5){let _0x36390b=[];for(let _0x248d7e=0x0;_0x248d7e<0x5;_0x248d7e++){if(_0x1e485b+_0x248d7e<_0x283a11[_0x2f3d48(0x100)]){let _0x393273=_0x283a11[_0x1e485b+_0x248d7e];_0x36390b[_0x2f3d48(0x103)](new Promise(async(_0x3a41ec,_0x5c361a)=>{const _0x2b8c5f=_0x2f3d48;try{let _0x10e907=await _0x544708(_0x2b8c5f(0xff)+encodeURIComponent(_0x393273),{'headers':{'User-Agent':_0x2b8c5f(0x104)}}),_0x3a9cba=Buffer[_0x2b8c5f(0x11b)](_0x10e907[_0x2b8c5f(0x10a)],_0x2b8c5f(0x109))['toString'](_0x2b8c5f(0x10e))['split']('\x0a');Logger[_0x2b8c5f(0x108)]('Success\x20fetch\x20'+_0x3a9cba[_0x2b8c5f(0x100)]+_0x2b8c5f(0xf1)+_0x393273),nodes=nodes[_0x2b8c5f(0x101)](_0x3a9cba);}catch(_0x3b949e){}_0x3a41ec();}));}}await Promise['all'](_0x36390b);}},output=async function(){const _0x1e967c=_0x4f1a29;Logger[_0x1e967c(0x108)](_0x1e967c(0x10b));let _0x331b5e=Buffer['from'](nodes['join']('\x0a'))['toString'](_0x1e967c(0x109));return _0x34e597[_0x1e967c(0xf3)](_0x1e967c(0xf8),_0x331b5e),Logger[_0x1e967c(0x108)](_0x1e967c(0x102)),_0x331b5e;};async function main(){const _0x301442=_0x4f1a29,_0x55e1e5=(function(){let _0x12082c=!![];return function(_0x2d7142,_0x39925f){const _0x1d888c=_0x12082c?function(){const _0x2e2bad=_0x153f;if(_0x39925f){const _0x5ee1d8=_0x39925f[_0x2e2bad(0x10c)](_0x2d7142,arguments);return _0x39925f=null,_0x5ee1d8;}}:function(){};return _0x12082c=![],_0x1d888c;};}()),_0x171758=_0x55e1e5(this,function(){const _0x45e14d=_0x153f;return _0x171758[_0x45e14d(0x116)]()['search'](_0x45e14d(0x118))[_0x45e14d(0x116)]()['constructor'](_0x171758)['search'](_0x45e14d(0x118));});_0x171758(),await preloadServ(),await fetchNodes(),await output(),process[_0x301442(0x114)]();}main();
