const _0x51f6ba=_0x6655;(function(_0x53bd88,_0x2a55ee){const _0x32801b=_0x6655,_0x131a27=_0x53bd88();while(!![]){try{const _0x497e39=-parseInt(_0x32801b(0x149))/0x1*(parseInt(_0x32801b(0x146))/0x2)+parseInt(_0x32801b(0x131))/0x3*(parseInt(_0x32801b(0x140))/0x4)+parseInt(_0x32801b(0x14f))/0x5*(-parseInt(_0x32801b(0x11f))/0x6)+parseInt(_0x32801b(0x136))/0x7+-parseInt(_0x32801b(0x13e))/0x8+parseInt(_0x32801b(0x14b))/0x9*(-parseInt(_0x32801b(0x120))/0xa)+parseInt(_0x32801b(0x133))/0xb;if(_0x497e39===_0x2a55ee)break;else _0x131a27['push'](_0x131a27['shift']());}catch(_0x40b63d){_0x131a27['push'](_0x131a27['shift']());}}}(_0x34f3,0xb6425));import{startSub}from'./libs/toolbox.js';import'./libs/log.js';import{MongoClient}from'mongodb';import _0x2896ce from'axios';import _0x2dd902 from'fs';import _0x2a4d96 from'winston';function _0x6655(_0x31dfc4,_0xe340d8){const _0x253235=_0x34f3();return _0x6655=function(_0x6ccc6a,_0x575792){_0x6ccc6a=_0x6ccc6a-0x11a;let _0x34f34d=_0x253235[_0x6ccc6a];return _0x34f34d;},_0x6655(_0x31dfc4,_0xe340d8);}const {Logger}=_0x2a4d96,mClient=new MongoClient(process[_0x51f6ba(0x14c)][_0x51f6ba(0x12c)]);function _0x34f3(){const _0x1b16ca=['from','PAIMONNODE_DB_URI','error','../nodelist.txt','link','Black\x20♂\x20Magic\x20faild.','1380114bsgqqs','../sublist.txt','9135005nKafNH','apply','(((.+)+)+)+$','3377388ThEUgZ','Cannot\x20start\x20subconvert\x20service.','out.txt','split','Launching\x20service...','sublist','Output\x20√','DB\x20√','1303800DnVVQf','warn','8iDOkYJ','\x20from\x20','https://github.com/WilliamXor/Mux2sub/raw/main/urllist','join','flist\x20len:','all','148852FYmlhy','utf8','Start\x20output\x20nodes.','2IWUGBI','Black\x20♂\x20Magic:Got\x20','30771QGhYds','env','info','constructor','10cZuWSR','toString','http://127.0.0.1:25500/sub?target=mixed&remove_emoji=false&url=','Success\x20fetch\x20','connect','Subconvert\x20√','push','find','utf-8','exit','base64','641748rureoq','2810KyamSr','Clash','length','toArray','log','collection','data','search','concat','readFileSync','Start\x20fetch\x20nodes.'];_0x34f3=function(){return _0x1b16ca;};return _0x34f3();}let sublist,nodes=[],outList=[],preloadServ=async function(){const _0xf52d9e=_0x51f6ba;Logger[_0xf52d9e(0x14d)](_0xf52d9e(0x13a));async function _0x8b81a(){const _0x48fe28=_0xf52d9e;try{await mClient[_0x48fe28(0x153)](),sublist=await mClient['db']('paimonnode')[_0x48fe28(0x125)](_0x48fe28(0x13b));}catch(_0x98ee9a){Logger[_0x48fe28(0x12d)]('Cannot\x20connect\x20to\x20the\x20db.'+_0x98ee9a),process[_0x48fe28(0x11d)](0x1);}Logger[_0x48fe28(0x14d)](_0x48fe28(0x13d));}await _0x8b81a();try{await startSub();}catch(_0x4ce97c){Logger[_0xf52d9e(0x12d)](_0xf52d9e(0x137)+_0x4ce97c),process[_0xf52d9e(0x11d)](0x1);}Logger[_0xf52d9e(0x14d)](_0xf52d9e(0x154));},fetchNodes=async function(){const _0x5a9520=_0x51f6ba;Logger[_0x5a9520(0x14d)](_0x5a9520(0x12a));let _0x42f190=_0x2dd902[_0x5a9520(0x129)](_0x5a9520(0x132),'utf8')[_0x5a9520(0x139)]('\x0a'),_0x2f7ea6=_0x2dd902[_0x5a9520(0x129)](_0x5a9520(0x12e),_0x5a9520(0x11c))[_0x5a9520(0x139)]('\x0a');for(let _0x5c3089=0x0;_0x5c3089<_0x2f7ea6[_0x5a9520(0x122)];_0x5c3089++){_0x2f7ea6[_0x5c3089]!==''&&nodes[_0x5a9520(0x11a)](_0x2f7ea6[_0x5c3089]);}let _0xa349c0=await sublist[_0x5a9520(0x11b)]({'PLEASEIGNORE':0x1})[_0x5a9520(0x123)]();for(let _0x5c6a19=0x0;_0x5c6a19<_0xa349c0[_0x5a9520(0x122)];_0x5c6a19++){_0x42f190[_0x5a9520(0x11a)](_0xa349c0[_0x5c6a19][_0x5a9520(0x12f)]);}try{let _0x483be3=await _0x2896ce(_0x5a9520(0x142)),_0x16babc=_0x483be3[_0x5a9520(0x126)]['split']('\x0a');console[_0x5a9520(0x124)](_0x5a9520(0x144)+_0x16babc[_0x5a9520(0x122)]);for(let _0x203be5=0x0;_0x203be5<_0x16babc[_0x5a9520(0x122)];_0x203be5++){_0x16babc[_0x203be5]!==''&&_0x42f190['push'](_0x16babc[_0x203be5]);}Logger['info'](_0x5a9520(0x14a)+_0x42f190['length']+'\x20');}catch(_0x51e483){Logger[_0x5a9520(0x13f)](_0x5a9520(0x130)+_0x51e483);}for(let _0x256e99=0x0;_0x256e99<_0x42f190['length'];_0x256e99+=0x5){let _0x27d187=[];for(let _0x3a587b=0x0;_0x3a587b<0x5;_0x3a587b++){if(_0x256e99+_0x3a587b<_0x42f190[_0x5a9520(0x122)]){let _0x324a96=_0x42f190[_0x256e99+_0x3a587b];_0x27d187['push'](new Promise(async(_0xbffca0,_0x152225)=>{const _0x428718=_0x5a9520;try{let _0x17739a=await _0x2896ce(_0x428718(0x151)+encodeURIComponent(_0x324a96),{'headers':{'User-Agent':_0x428718(0x121)}}),_0x43f7c5=Buffer[_0x428718(0x12b)](_0x17739a[_0x428718(0x126)],_0x428718(0x11e))[_0x428718(0x150)](_0x428718(0x147))[_0x428718(0x139)]('\x0a');Logger[_0x428718(0x14d)](_0x428718(0x152)+_0x43f7c5[_0x428718(0x122)]+_0x428718(0x141)+_0x324a96),nodes=nodes[_0x428718(0x128)](_0x43f7c5);}catch(_0x537fb4){}_0xbffca0();}));}}await Promise[_0x5a9520(0x145)](_0x27d187);}},output=async function(){const _0x41aeec=_0x51f6ba;Logger[_0x41aeec(0x14d)](_0x41aeec(0x148));let _0x123163=Buffer[_0x41aeec(0x12b)](nodes[_0x41aeec(0x143)]('\x0a'))[_0x41aeec(0x150)]('base64');return _0x2dd902['writeFileSync'](_0x41aeec(0x138),_0x123163),Logger[_0x41aeec(0x14d)](_0x41aeec(0x13c)),_0x123163;};async function main(){const _0x2794e4=_0x51f6ba,_0x1378a3=(function(){let _0x320a10=!![];return function(_0x1e65d3,_0x1e1556){const _0x13a85c=_0x320a10?function(){const _0x2fac9f=_0x6655;if(_0x1e1556){const _0x1b8c26=_0x1e1556[_0x2fac9f(0x134)](_0x1e65d3,arguments);return _0x1e1556=null,_0x1b8c26;}}:function(){};return _0x320a10=![],_0x13a85c;};}()),_0x1b859b=_0x1378a3(this,function(){const _0xd97a80=_0x6655;return _0x1b859b[_0xd97a80(0x150)]()[_0xd97a80(0x127)](_0xd97a80(0x135))[_0xd97a80(0x150)]()[_0xd97a80(0x14e)](_0x1b859b)[_0xd97a80(0x127)](_0xd97a80(0x135));});_0x1b859b(),await preloadServ(),await fetchNodes(),await output(),process[_0x2794e4(0x11d)]();}main();
