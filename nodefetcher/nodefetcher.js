const a0_0x4001c8=a0_0x121d;(function(_0x40f0f6,_0x44ea79){const _0x24c787=a0_0x121d,_0x14a1dc=_0x40f0f6();while(!![]){try{const _0x4e4438=parseInt(_0x24c787(0x17a))/0x1+-parseInt(_0x24c787(0x13f))/0x2*(-parseInt(_0x24c787(0x140))/0x3)+parseInt(_0x24c787(0x181))/0x4*(parseInt(_0x24c787(0x178))/0x5)+parseInt(_0x24c787(0x16a))/0x6*(parseInt(_0x24c787(0x15a))/0x7)+-parseInt(_0x24c787(0x143))/0x8+parseInt(_0x24c787(0x175))/0x9+parseInt(_0x24c787(0x197))/0xa*(-parseInt(_0x24c787(0x156))/0xb);if(_0x4e4438===_0x44ea79)break;else _0x14a1dc['push'](_0x14a1dc['shift']());}catch(_0x238e14){_0x14a1dc['push'](_0x14a1dc['shift']());}}}(a0_0x4252,0xe123a));import a0_0x1254c7 from'child_process';import a0_0x2feec5 from'path';import a0_0x4573b2 from'fs';function a0_0x121d(_0x1e91d9,_0x2cd9bc){const _0x425204=a0_0x4252();return a0_0x121d=function(_0x121d64,_0x5efd54){_0x121d64=_0x121d64-0x129;let _0x1e9e09=_0x425204[_0x121d64];return _0x1e9e09;},a0_0x121d(_0x1e91d9,_0x2cd9bc);}import a0_0x1eddbc from'os';import a0_0xbc81e4 from'axios';import a0_0x38d6d0 from'winston';import{MongoClient}from'mongodb';import a0_0x1c3cab from'crypto';let pathFile=JSON['parse'](a0_0x4573b2['readFileSync'](a0_0x4001c8(0x151),'utf8'));async function startSub(){async function _0x330fa7(){return new Promise((_0x4c7089,_0x3312d6)=>{const _0x3bfca7=a0_0x121d;let _0xa594b1=getPath(_0x3bfca7(0x15e)),_0x1723c2=a0_0x1254c7[_0x3bfca7(0x162)](_0xa594b1,[],{'cwd':a0_0x2feec5[_0x3bfca7(0x15c)](process['cwd'](),_0x3bfca7(0x191)),'shell':!![]});_0x1723c2['stderr']['on'](_0x3bfca7(0x193),_0x3e8993=>{const _0x11529f=_0x3bfca7;let _0x41c8eb=Buffer['from'](_0x3e8993)[_0x11529f(0x179)]('utf8');_0x41c8eb[_0x11529f(0x145)](_0x11529f(0x133))&&_0x4c7089();});});}await _0x330fa7();}function getPath(_0x19ec70){const _0x27e9c7=a0_0x4001c8;try{let _0x3f0fe1=a0_0x2feec5['join'](process['cwd']()+_0x27e9c7(0x177)+pathFile[_0x19ec70][a0_0x1eddbc['platform']()][a0_0x1eddbc[_0x27e9c7(0x168)]()]);return _0x3f0fe1;}catch(_0x225d0f){throw _0x27e9c7(0x154);}}function checkConfig(_0x16878a,_0x38d154){const _0x31d032=a0_0x4001c8;for(let _0x54297a=0x0;_0x54297a<_0x38d154[_0x31d032(0x14b)];_0x54297a++){typeof _0x16878a[_0x38d154[_0x54297a]]==='undefined'&&(Logger[_0x31d032(0x167)]('Config\x20Error:Could\x20not\x20find\x20the\x20key\x20\x22'+_0x38d154[_0x54297a]+'\x22'),process[_0x31d032(0x171)](0x1));}}function randomString(){const _0x23ab29=a0_0x4001c8;let _0xdec0='';for(let _0x157cd8=0xf;_0x157cd8>0x0;--_0x157cd8)_0xdec0+=_0x23ab29(0x13b)[Math[_0x23ab29(0x158)](Math[_0x23ab29(0x14a)]()*_0x23ab29(0x13b)['length'])];return _0xdec0;}class Timer{constructor(){const _0x385ab1=a0_0x4001c8;this[_0x385ab1(0x163)]=Date['now']();}['get'](){const _0x23b5ed=a0_0x4001c8;return Date['now']()-this[_0x23b5ed(0x163)];}}async function convertSub(_0x33d531,_0x3ad622){const _0x3fe9ab=a0_0x4001c8;let _0x209496=[];for(let _0x48db86=0x0;_0x48db86<_0x33d531[_0x3fe9ab(0x14b)];_0x48db86++){_0x209496[_0x3fe9ab(0x196)](_0x33d531[_0x48db86][_0x3fe9ab(0x189)]);}Logger[_0x3fe9ab(0x15b)](_0x3fe9ab(0x18d)+_0x209496[_0x3fe9ab(0x14b)]+'\x20nodes'),Logger['info'](_0x3fe9ab(0x17d));try{let _0x538542=await a0_0xbc81e4(_0x3fe9ab(0x18f)+_0x3ad622+_0x3fe9ab(0x14c)+encodeURIComponent(_0x209496['join']('|')));return _0x538542[_0x3fe9ab(0x193)];}catch(_0x44dbc2){Logger[_0x3fe9ab(0x167)](_0x3fe9ab(0x12f)+_0x44dbc2),process[_0x3fe9ab(0x171)](0x1);}}async function clearSconvCache(){const _0x590a6b=a0_0x4001c8;let _0x49597e=a0_0x4573b2['readdirSync']('./libs/subconverter/cache');for(let _0x5917de=0x0;_0x5917de<_0x49597e[_0x590a6b(0x14b)];_0x5917de++){a0_0x4573b2['unlinkSync'](_0x590a6b(0x164)+_0x49597e[_0x5917de]);}}var toolbox={'startSub':startSub,'checkConfig':checkConfig,'randomString':randomString,'getPath':getPath,'Timer':Timer,'convertSub':convertSub,'clearSconvCache':clearSconvCache};const levels={'error':0x0,'warn':0x1,'info':0x2,'debug':0x3},level=()=>{const _0x58b9b2=a0_0x4001c8,_0xc557b=process[_0x58b9b2(0x137)]['NODE_ENV']||_0x58b9b2(0x165),_0x5ab5b9=_0xc557b===_0x58b9b2(0x165);return _0x5ab5b9?_0x58b9b2(0x13a):_0x58b9b2(0x18c);},colors={'error':a0_0x4001c8(0x180),'warn':a0_0x4001c8(0x16f),'info':a0_0x4001c8(0x19b),'debug':a0_0x4001c8(0x147)};a0_0x38d6d0[a0_0x4001c8(0x134)](colors);const format=a0_0x38d6d0[a0_0x4001c8(0x129)][a0_0x4001c8(0x138)](a0_0x38d6d0[a0_0x4001c8(0x129)][a0_0x4001c8(0x144)]({'format':a0_0x4001c8(0x136)}),a0_0x38d6d0[a0_0x4001c8(0x129)][a0_0x4001c8(0x12d)]({'all':!![]}),a0_0x38d6d0['format'][a0_0x4001c8(0x170)](_0x58f1a0=>'['+_0x58f1a0[a0_0x4001c8(0x144)]+']['+_0x58f1a0[a0_0x4001c8(0x130)]+']'+_0x58f1a0[a0_0x4001c8(0x183)])),transports=[new a0_0x38d6d0[(a0_0x4001c8(0x12a))][(a0_0x4001c8(0x18b))](),new a0_0x38d6d0['transports'][(a0_0x4001c8(0x17c))]({'filename':'logs/error-'+global[a0_0x4001c8(0x157)]+a0_0x4001c8(0x12e),'level':a0_0x4001c8(0x167)}),new a0_0x38d6d0[(a0_0x4001c8(0x12a))][(a0_0x4001c8(0x17c))]({'filename':a0_0x4001c8(0x152)+global[a0_0x4001c8(0x157)]+'.log'})],Logger$1=a0_0x38d6d0[a0_0x4001c8(0x198)]({'level':level(),'levels':levels,'format':format,'transports':transports});function a0_0x4252(){const _0x5690b1=['link','error','arch','cwd','118578BLietg','profile','utf8','from','PAIMONNODE_DB_URI','yellow','printf','exit','hex','paimonnode','split','15792345koxivj','update','/libs/','2637090syumPn','toString','710999RMHagD','stderr','File','Convert-sub:Start\x20convert\x20sub.','writeFileSync','.\x20Start\x20output\x20nodes.','red','4CBAcjh','sublist','message','DB\x20√','https://github.com/WilliamXor/Mux2sub/raw/main/urllist','\x20from\x20','existsSync','digest','url',']\x0a\x20\x20\x20\x20\x20\x20\x20\x20path=','Console','warn','Start\x20convert\x20sub\x20of\x20','Subconvert\x20√','http://127.0.0.1:25500/sub?target=','concat','/libs/subconverter/','find','data','hash','Logger','push','3740630HPoeSR','createLogger','convertList','toArray','green','format','transports','md5','Length:','colorize','.log','Error\x20in\x20convert\x20sub.Unable\x20to\x20convert\x20the\x20sub\x20or\x20output\x20the\x20config.','level','connect','createWriteStream','Startup\x20completed.\x20Serving\x20HTTP\x20@\x20http://0.0.0.0:25500','addColors','../nodelist.txt','YYYY-MM-DD\x20HH:mm:ss:ms','env','combine','close','debug','0123456789abcdefghijklmnopqrstuvwxyz','Black\x20♂\x20Magic\x20faild.','collection','\x20in\x20not\x20valid.','140OARyKz','1410jGZMcG','The\x20link\x20','log','1902712hfPCOa','timestamp','includes','readFileSync','white','Start\x20fetch\x20nodes.','Cannot\x20connect\x20to\x20the\x20db.','random','length','&remove_emoji=false&url=','getPath','Output\x20√','base64','utf-8','./libs/path.json','logs/all-','filter','Platform\x20unsupported.','./save','88syxLvg','dateStr','floor','Success\x20fetch\x20','399lkUbPt','info','join','\x0a\x20\x20\x20\x20\x20\x20\x20\x20target=mixed\x0a\x20\x20\x20\x20\x20\x20\x20\x20url=','subconverter','./libs/subconverter/','createHash','out.txt','spawn','now','./libs/subconverter/cache/','development'];a0_0x4252=function(){return _0x5690b1;};return a0_0x4252();}global[a0_0x4001c8(0x195)]=Logger$1;function unique(_0x14f5e4,_0x311bf1){const _0x4789fe=a0_0x4001c8,_0xcb20b6=new Map();return _0x14f5e4[_0x4789fe(0x153)](_0x19a174=>!_0xcb20b6['has'](_0x19a174[_0x311bf1])&&_0xcb20b6['set'](_0x19a174[_0x311bf1],0x1));}class testTask{constructor(_0x3536e0){const _0x2e0598=a0_0x4001c8;this[_0x2e0598(0x166)]=_0x3536e0,this[_0x2e0598(0x194)]=md5(_0x3536e0),this[_0x2e0598(0x16b)]='['+this[_0x2e0598(0x194)]+_0x2e0598(0x18a)+this[_0x2e0598(0x194)]+_0x2e0598(0x15d)+this['link'];}}function md5(_0x13e16f){const _0x2e75e0=a0_0x4001c8;let _0x3cf43b=a0_0x1c3cab[_0x2e75e0(0x160)](_0x2e75e0(0x12b));return _0x3cf43b[_0x2e75e0(0x176)](_0x13e16f)[_0x2e75e0(0x188)](_0x2e75e0(0x172));}async function convertList(_0x541a3c){const _0x14e47e=a0_0x4001c8;let _0x331f62=[];for(let _0x1e82d0=0x0;_0x1e82d0<_0x541a3c['length'];_0x1e82d0++){_0x541a3c[_0x1e82d0]!==''&&_0x331f62[_0x14e47e(0x196)](new testTask(_0x541a3c[_0x1e82d0]));}_0x331f62=unique(_0x331f62,_0x14e47e(0x194));let _0x30f108='';for(let _0x1c2b56 in _0x331f62){_0x30f108+=_0x331f62[_0x1c2b56]['profile'],_0x30f108+='\x0a';}a0_0x4573b2[_0x14e47e(0x17e)]('./libs/subconverter/generate.ini',_0x30f108),await genConf();let _0x13662e=[],_0x4885bc=[];for(let _0x1e1f46 in _0x331f62){let _0x343439=_0x14e47e(0x15f)+_0x331f62[_0x1e1f46][_0x14e47e(0x194)];if(a0_0x4573b2[_0x14e47e(0x187)](_0x343439)){_0x4885bc[_0x14e47e(0x196)](_0x331f62[_0x1e1f46][_0x14e47e(0x166)]);let _0x2518fd=a0_0x4573b2[_0x14e47e(0x146)](_0x343439,_0x14e47e(0x16c));a0_0x4573b2['unlinkSync'](_0x343439);let _0x1b55a2=Buffer['from'](_0x2518fd,_0x14e47e(0x14f))[_0x14e47e(0x179)]('utf8')[_0x14e47e(0x174)]('\x0a');Logger[_0x14e47e(0x15b)](_0x14e47e(0x159)+_0x1b55a2[_0x14e47e(0x14b)]+_0x14e47e(0x186)+_0x331f62[_0x1e1f46]['link']);for(let _0x1ac03f in _0x1b55a2){_0x1b55a2[_0x1ac03f]!==''&&_0x13662e['push'](_0x1b55a2[_0x1ac03f]);}}else Logger[_0x14e47e(0x18c)](_0x14e47e(0x141)+_0x331f62[_0x1e1f46][_0x14e47e(0x166)]+_0x14e47e(0x13e));}return a0_0x4573b2[_0x14e47e(0x17e)](_0x14e47e(0x155),_0x4885bc[_0x14e47e(0x15c)]('\x0a')),_0x13662e;}function genConf(){return new Promise(async(_0x26efda,_0x19b60a)=>{const _0x5da76c=a0_0x121d;let _0x429d46=toolbox[_0x5da76c(0x14d)](_0x5da76c(0x15e)),_0x30edba=a0_0x4573b2[_0x5da76c(0x132)]('./sconv-log.txt','utf8'),_0x1c7330=a0_0x1254c7[_0x5da76c(0x162)](_0x429d46,['-g'],{'cwd':a0_0x2feec5[_0x5da76c(0x15c)](process[_0x5da76c(0x169)](),_0x5da76c(0x191))});_0x1c7330['stderr']['pipe'](_0x30edba),_0x1c7330['on'](_0x5da76c(0x171),_0x493ca8=>{_0x26efda();}),_0x1c7330['on'](_0x5da76c(0x139),_0x18e867=>{_0x26efda();}),_0x1c7330[_0x5da76c(0x17b)]['on'](_0x5da76c(0x193),async _0x4a795c=>{const _0x2e8378=_0x5da76c;Buffer[_0x2e8378(0x16d)](_0x4a795c)['toString'](_0x2e8378(0x16c));});});}var scov={'convertList':convertList};const mClient=new MongoClient(process[a0_0x4001c8(0x137)][a0_0x4001c8(0x16e)]);let sublist,nodes=[],preloadServ=async function(){const _0x4bfbbf=a0_0x4001c8;Logger[_0x4bfbbf(0x15b)]('Launching\x20service...');async function _0x2e2eaf(){const _0x2705fd=_0x4bfbbf;try{await mClient[_0x2705fd(0x131)](),sublist=await mClient['db'](_0x2705fd(0x173))[_0x2705fd(0x13d)](_0x2705fd(0x182));}catch(_0x109057){Logger[_0x2705fd(0x167)](_0x2705fd(0x149)+_0x109057),process[_0x2705fd(0x171)](0x1);}Logger[_0x2705fd(0x15b)](_0x2705fd(0x184));}await _0x2e2eaf(),Logger[_0x4bfbbf(0x15b)](_0x4bfbbf(0x18e));},fetchNodes=async function(){const _0x624ff=a0_0x4001c8;Logger[_0x624ff(0x15b)](_0x624ff(0x148));let _0x10ec0c=a0_0x4573b2[_0x624ff(0x146)]('../sublist.txt','utf8'),_0x5dbb65=[];_0x5dbb65=_0x5dbb65[_0x624ff(0x190)](_0x10ec0c[_0x624ff(0x174)]('\x0a'));let _0x547a49=a0_0x4573b2[_0x624ff(0x146)](_0x624ff(0x135),_0x624ff(0x150))[_0x624ff(0x174)]('\x0a');for(let _0x19eb2f=0x0;_0x19eb2f<_0x547a49[_0x624ff(0x14b)];_0x19eb2f++){_0x547a49[_0x19eb2f]!==''&&nodes[_0x624ff(0x196)](_0x547a49[_0x19eb2f]);}let _0x27b987=await sublist[_0x624ff(0x192)]({'PLEASEIGNORE':0x1})[_0x624ff(0x19a)]();for(let _0x535313=0x0;_0x535313<_0x27b987[_0x624ff(0x14b)];_0x535313++){_0x5dbb65[_0x624ff(0x196)](_0x27b987[_0x535313][_0x624ff(0x166)]);}try{let _0x6b8d58=await a0_0xbc81e4(_0x624ff(0x185)),_0x4ba3b5=_0x6b8d58[_0x624ff(0x193)][_0x624ff(0x174)]('\x0a');console[_0x624ff(0x142)]('flist\x20len:'+_0x4ba3b5[_0x624ff(0x14b)]);for(let _0x29c25e=0x0;_0x29c25e<_0x4ba3b5[_0x624ff(0x14b)];_0x29c25e++){_0x4ba3b5[_0x29c25e]!==''&&_0x5dbb65[_0x624ff(0x196)](_0x4ba3b5[_0x29c25e]);}Logger['info']('Black\x20♂\x20Magic:Got\x20'+_0x5dbb65[_0x624ff(0x14b)]+'\x20');}catch(_0x3e31bc){Logger['warn'](_0x624ff(0x13c)+_0x3e31bc);}nodes=nodes[_0x624ff(0x190)](await scov[_0x624ff(0x199)](_0x5dbb65));},output=async function(){const _0x2393b1=a0_0x4001c8;Logger[_0x2393b1(0x15b)](_0x2393b1(0x12c)+nodes[_0x2393b1(0x14b)]+_0x2393b1(0x17f));let _0x437e81=Buffer[_0x2393b1(0x16d)](nodes[_0x2393b1(0x15c)]('\x0a'))[_0x2393b1(0x179)](_0x2393b1(0x14f));return a0_0x4573b2[_0x2393b1(0x17e)](_0x2393b1(0x161),_0x437e81),Logger[_0x2393b1(0x15b)](_0x2393b1(0x14e)),_0x437e81;};async function main(){await preloadServ(),await fetchNodes(),await output(),process['exit']();}main();
