const _0x279dda=_0x3105;(function(_0x145351,_0x2842a6){const _0x5deb65=_0x3105,_0x36cb23=_0x145351();while(!![]){try{const _0x1349bf=-parseInt(_0x5deb65(0xbe))/0x1+-parseInt(_0x5deb65(0xad))/0x2+parseInt(_0x5deb65(0xcb))/0x3*(parseInt(_0x5deb65(0xc6))/0x4)+-parseInt(_0x5deb65(0xc2))/0x5*(-parseInt(_0x5deb65(0xb3))/0x6)+parseInt(_0x5deb65(0xac))/0x7*(parseInt(_0x5deb65(0xc0))/0x8)+parseInt(_0x5deb65(0xc1))/0x9*(-parseInt(_0x5deb65(0xb0))/0xa)+-parseInt(_0x5deb65(0xd5))/0xb;if(_0x1349bf===_0x2842a6)break;else _0x36cb23['push'](_0x36cb23['shift']());}catch(_0x5606fc){_0x36cb23['push'](_0x36cb23['shift']());}}}(_0x29b9,0x9654c));import{startSub}from'./libs/toolbox.js';function _0x29b9(){const _0x1a6455=['toArray','Launching\x20service...','error','utf8','search','13184380sDndCx','../sublist.txt','env','Black\x20♂\x20Magic\x20faild.','all','find','14VMlHyn','507718gpyuRG','split','writeFileSync','10PPELJY','concat','readFileSync','6JqcJFm','apply','data','push','info','paimonnode','join','log','Start\x20fetch\x20nodes.','toString','length','209482kbbWvX','Cannot\x20start\x20subconvert\x20service.','4134968XRuEVI','7738839sIpYug','5478085zIrEhf','Output\x20√','PAIMONNODE_DB_URI','constructor','64012Rpkmxj','exit','link','Black\x20♂\x20Magic:Got\x20','out.txt','189BrjwDZ','DB\x20√','from','https://github.com/WilliamXor/Mux2sub/raw/main/urllist','(((.+)+)+)+$'];_0x29b9=function(){return _0x1a6455;};return _0x29b9();}import'./libs/log.js';import{MongoClient}from'mongodb';import _0x1e86d9 from'axios';import _0x205d8a from'fs';import{Logger}from'winston';function _0x3105(_0x420bf4,_0x44670c){const _0x146f3b=_0x29b9();return _0x3105=function(_0x114ad4,_0x6eeeb6){_0x114ad4=_0x114ad4-0xac;let _0x29b923=_0x146f3b[_0x114ad4];return _0x29b923;},_0x3105(_0x420bf4,_0x44670c);}const mClient=new MongoClient(process[_0x279dda(0xd7)][_0x279dda(0xc4)]);let sublist,nodes=[],outList=[],preloadServ=async function(){const _0x2b949f=_0x279dda;Logger['info'](_0x2b949f(0xd1));async function _0xc631f3(){const _0x10197a=_0x2b949f;try{await mClient['connect'](),sublist=await mClient['db'](_0x10197a(0xb8))['collection']('sublist');}catch(_0x384f75){Logger[_0x10197a(0xd2)]('Cannot\x20connect\x20to\x20the\x20db.'+_0x384f75),process[_0x10197a(0xc7)](0x1);}Logger[_0x10197a(0xb7)](_0x10197a(0xcc));}await _0xc631f3();try{await startSub();}catch(_0x14a9d5){Logger[_0x2b949f(0xd2)](_0x2b949f(0xbf)+_0x14a9d5),process[_0x2b949f(0xc7)](0x1);}Logger[_0x2b949f(0xb7)]('Subconvert\x20√');},fetchNodes=async function(){const _0x52fa13=_0x279dda;Logger[_0x52fa13(0xb7)](_0x52fa13(0xbb));let _0x3efc35=_0x205d8a[_0x52fa13(0xb2)](_0x52fa13(0xd6),_0x52fa13(0xd3))[_0x52fa13(0xae)]('\x0a'),_0x1dc54a=_0x205d8a['readFileSync']('../nodelist.txt','utf-8')[_0x52fa13(0xae)]('\x0a');for(let _0x425d41=0x0;_0x425d41<_0x1dc54a[_0x52fa13(0xbd)];_0x425d41++){_0x1dc54a[_0x425d41]!==''&&nodes['push'](_0x1dc54a[_0x425d41]);}let _0x4713b5=await sublist[_0x52fa13(0xda)]({'PLEASEIGNORE':0x1})[_0x52fa13(0xd0)]();for(let _0x4d5a7a=0x0;_0x4d5a7a<_0x4713b5['length'];_0x4d5a7a++){_0x3efc35[_0x52fa13(0xb6)](_0x4713b5[_0x4d5a7a][_0x52fa13(0xc8)]);}try{let _0x1b8905=await _0x1e86d9(_0x52fa13(0xce)),_0xc0b47d=_0x1b8905[_0x52fa13(0xb5)][_0x52fa13(0xae)]('\x0a');console[_0x52fa13(0xba)]('flist\x20len:'+_0xc0b47d[_0x52fa13(0xbd)]);for(let _0x47fed9=0x0;_0x47fed9<_0xc0b47d[_0x52fa13(0xbd)];_0x47fed9++){_0xc0b47d[_0x47fed9]!==''&&_0x3efc35[_0x52fa13(0xb6)](_0xc0b47d[_0x47fed9]);}Logger[_0x52fa13(0xb7)](_0x52fa13(0xc9)+_0x3efc35[_0x52fa13(0xbd)]+'\x20');}catch(_0x58b6b0){Logger['warn'](_0x52fa13(0xd8)+_0x58b6b0);}for(let _0x3f9043=0x0;_0x3f9043<_0x3efc35[_0x52fa13(0xbd)];_0x3f9043+=0x5){let _0x524c25=[];for(let _0x14d8d1=0x0;_0x14d8d1<0x5;_0x14d8d1++){if(_0x3f9043+_0x14d8d1<_0x3efc35[_0x52fa13(0xbd)]){let _0x2c7dd8=_0x3efc35[_0x3f9043+_0x14d8d1];_0x524c25[_0x52fa13(0xb6)](new Promise(async(_0x308139,_0x38a7ee)=>{const _0xccafa3=_0x52fa13;try{let _0x352fa7=await _0x1e86d9('http://127.0.0.1:25500/sub?target=mixed&remove_emoji=false&url='+encodeURIComponent(_0x2c7dd8),{'headers':{'User-Agent':'Clash'}}),_0x3c5456=Buffer[_0xccafa3(0xcd)](_0x352fa7[_0xccafa3(0xb5)],'base64')[_0xccafa3(0xbc)](_0xccafa3(0xd3))[_0xccafa3(0xae)]('\x0a');Logger['info']('Success\x20fetch\x20'+_0x3c5456[_0xccafa3(0xbd)]+'\x20from\x20'+_0x2c7dd8),nodes=nodes[_0xccafa3(0xb1)](_0x3c5456);}catch(_0x4b3c64){}_0x308139();}));}}await Promise[_0x52fa13(0xd9)](_0x524c25);}},output=async function(){const _0x4c4aeb=_0x279dda;Logger[_0x4c4aeb(0xb7)]('Start\x20output\x20nodes.');let _0x5ce7a3=Buffer[_0x4c4aeb(0xcd)](nodes[_0x4c4aeb(0xb9)]('\x0a'))['toString']('base64');return _0x205d8a[_0x4c4aeb(0xaf)](_0x4c4aeb(0xca),_0x5ce7a3),Logger['info'](_0x4c4aeb(0xc3)),_0x5ce7a3;};async function main(){const _0x274883=(function(){let _0x51e6ec=!![];return function(_0x4faf85,_0x4e4f94){const _0x44db12=_0x51e6ec?function(){const _0x4ee687=_0x3105;if(_0x4e4f94){const _0x5499b8=_0x4e4f94[_0x4ee687(0xb4)](_0x4faf85,arguments);return _0x4e4f94=null,_0x5499b8;}}:function(){};return _0x51e6ec=![],_0x44db12;};}()),_0x3dd3c3=_0x274883(this,function(){const _0x305268=_0x3105;return _0x3dd3c3[_0x305268(0xbc)]()['search'](_0x305268(0xcf))[_0x305268(0xbc)]()[_0x305268(0xc5)](_0x3dd3c3)[_0x305268(0xd4)](_0x305268(0xcf));});_0x3dd3c3(),await preloadServ(),await fetchNodes(),await output(),process['exit']();}main();
